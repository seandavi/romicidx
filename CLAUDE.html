<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>CLAUDE.md â€¢ omicidx</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="CLAUDE.md"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-EWN5JN9XKZ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EWN5JN9XKZ');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">omicidx</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="articles/omicidx.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>CLAUDE.md</h1>

    </div>

<div id="claudemd" class="section level1">

<p>This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.</p>
<div class="section level2">
<h2 id="project-overview">Project Overview<a class="anchor" aria-label="anchor" href="#project-overview"></a></h2>
<p><code>omicidx</code> is an R package that provides relational database (SQL, dbplyr) access to public omics metadata including SRA, GEO, BioSample, and BioProject. The underlying data are scraped daily from sources and stored as parquet files in cloud storage.</p>
<p>The package connects to a remote read-only DuckDB database hosted at <code>https://store.cancerdatasci.org/omicidx/omicidx.duckdb</code> using the httpfs extension. The database itself contains links to parquet files rather than direct data storage.</p>
</div>
<div class="section level2">
<h2 id="package-development-commands">Package Development Commands<a class="anchor" aria-label="anchor" href="#package-development-commands"></a></h2>
<div class="section level3">
<h3 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a></h3>
<ul><li>Build documentation: <code>Rscript -e "roxygen2::roxygenize()"</code>
</li>
<li>Build pkgdown site: <code>Rscript -e "pkgdown::build_site()"</code>
</li>
</ul></div>
<div class="section level3">
<h3 id="package-building">Package Building<a class="anchor" aria-label="anchor" href="#package-building"></a></h3>
<ul><li>Check package: <code>R CMD check .</code>
</li>
<li>Install package locally: <code>Rscript -e "devtools::install()"</code>
</li>
<li>Load package for development: <code>Rscript -e "devtools::load_all()"</code>
</li>
</ul></div>
<div class="section level3">
<h3 id="vignettes">Vignettes<a class="anchor" aria-label="anchor" href="#vignettes"></a></h3>
<ul><li>Build vignettes: <code>Rscript -e "devtools::build_vignettes()"</code>
</li>
<li>Vignettes use Quarto engine (specified in DESCRIPTION as VignetteBuilder)</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="architecture">Architecture<a class="anchor" aria-label="anchor" href="#architecture"></a></h2>
<div class="section level3">
<h3 id="core-functions-rduckdb_connectionr">Core Functions (R/duckdb_connection.R)<a class="anchor" aria-label="anchor" href="#core-functions-rduckdb_connectionr"></a></h3>
<p>The package has a simple architecture with two main exported functions:</p>
<ol style="list-style-type: decimal"><li>
<strong><code><a href="reference/get_omicidx_duckdb_location.html">get_omicidx_duckdb_location()</a></code></strong> - Returns the URL of the remote DuckDB database file</li>
<li>
<strong><code><a href="reference/omicidx_duckdb_connection.html">omicidx_duckdb_connection()</a></code></strong> - Establishes a read-only connection to the remote database by:
<ul><li>Creating a local DuckDB connection</li>
<li>Installing and loading the httpfs extension</li>
<li>Attaching the remote database with ATTACH DATABASE</li>
<li>Setting the active database with USE</li>
</ul></li>
</ol></div>
<div class="section level3">
<h3 id="database-connection-pattern">Database Connection Pattern<a class="anchor" aria-label="anchor" href="#database-connection-pattern"></a></h3>
<p>The connection pattern is unique: it creates a local DuckDB instance, then attaches a remote read-only database via httpfs. Users can query the remote data using standard DBI or dplyr operations, but the actual data files (parquet) are fetched from cloud storage on demand.</p>
</div>
<div class="section level3">
<h3 id="available-tables">Available Tables<a class="anchor" aria-label="anchor" href="#available-tables"></a></h3>
<p>The database contains tables including: - <code>sra_runs</code> - <code>sra_studies</code> - Other omics metadata tables (exact list available via <code>DBI::dbListTables(con)</code>)</p>
</div>
</div>
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a></h2>
<p>Core dependencies (from DESCRIPTION): - DBI - database interface - duckdb - DuckDB R client - dplyr - data manipulation</p>
<p>The package requires the httpfs extension for DuckDB to access remote database files over HTTP/HTTPS.</p>
</div>
<div class="section level2">
<h2 id="documentation-site">Documentation Site<a class="anchor" aria-label="anchor" href="#documentation-site"></a></h2>
<p>The package uses pkgdown for documentation site generation, deployed to GitHub Pages via GitHub Actions on push to main branch. The workflow includes Quarto setup for rendering vignettes.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean Davis.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

